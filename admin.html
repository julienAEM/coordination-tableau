<!DOCTYPE html>

<!--
  Ce fichier est une version modifiée de la page d'administration originale.
  Il ajoute la possibilité de définir une liste d'adresses courriel à utiliser
  lors de l'envoi automatique des rapports depuis la page principale. Les
  courriels sont sauvegardés dans localStorage afin d'être récupérés par
  index.html lors de l'envoi d'un rapport.
-->
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Administration – Gestion des listes</title>
  <style>
    :root {
      --primary-color: #253746;
      --secondary-color: #324e67;
      --accent-color: #0078C8;
      --text-light: #ffffff;
      --field-bg: #f5f5f5;
    }
    body { font-family: Arial, sans-serif; margin: 0; padding: 0; background: var(--primary-color); color: var(--text-light); }
    .wrapper { max-width: 800px; margin: 2rem auto; background: var(--secondary-color); border-radius: 8px; padding: 2rem; box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
    h1 { margin-top: 0; margin-bottom: 1rem; }
    label { display: block; margin-top: 1rem; font-weight: bold; }
    textarea { width: 100%; height: 120px; padding: 0.6rem; border: 1px solid #ccc; border-radius: 4px; background: var(--field-bg); color: #333; }
    input[type="password"] { width:100%; padding:0.6rem; border:1px solid #ccc; border-radius:4px; background: var(--field-bg); color:#333; }
    button { margin-top: 1rem; padding: 0.7rem 1.4rem; background: var(--accent-color); color: var(--text-light); border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
<div class="wrapper" id="adminContent" class="hidden">
  <h1>Administration – Gestion des listes</h1>
  <p>Modifiez ci-dessous les listes utilisées pour les menus déroulants du site. Chaque valeur doit être sur une nouvelle ligne.</p>

  <!-- La liste des employés et des statuts a été supprimée -->

  <!-- Nouvelle liste pour les chefs d'équipe -->
  <label for="teamLeadList">Liste des chefs d'équipe :</label>
  <textarea id="teamLeadList">Jean Dupont
Marie Tremblay
Alain Gagnon
Sophie Lemaire</textarea>

  <label for="supervisorList">Liste des superviseurs :</label>
  <textarea id="supervisorList">Vincent Lévesque
Olivier Chrétien</textarea>

  <label for="shiftList">Liste des quarts :</label>
  <textarea id="shiftList">Jour
Nuit</textarea>

  <!-- Nouvelle section pour gérer la liste des courriels -->
  <h2>Liste des destinataires pour l'envoi des rapports</h2>
  <p>Entrez les adresses courriel auxquelles les rapports doivent être envoyés automatiquement, séparées par des points-virgules ou des retours à la ligne.</p>
  <label for="emailList">Adresses courriel :</label>
  <textarea id="emailList"></textarea>
  <button type="button" onclick="saveEmailList()">Enregistrer les courriels</button>

  <h2>Modifier le code d’accès</h2>
  <label for="newPassword">Nouveau code :</label>
  <input type="password" id="newPassword">
  <button type="button" onclick="updatePassword()">Enregistrer</button>

</div>
<div id="accessDenied" class="wrapper hidden">
  <h1>Accès refusé</h1>
  <p>Vous n'avez pas l'autorisation d'accéder à cette page.</p>
</div>
<script>
// Mot de passe administrateur et affichage conditionnel
document.addEventListener('DOMContentLoaded', function() {
  var storedPwd = localStorage.getItem('adminPassword') || 'admin';
  var pwd = prompt('Veuillez entrer le mot de passe administrateur :');
  if (pwd === storedPwd) {
    document.getElementById('adminContent').style.display = 'block';
    // Charger la liste des courriels enregistrée
    var storedEmails = localStorage.getItem('emailList') || '';
    document.getElementById('emailList').value = storedEmails;
  } else {
    document.getElementById('accessDenied').style.display = 'block';
  }
});

// Enregistrer un nouveau mot de passe
function updatePassword() {
  var newPwd = document.getElementById('newPassword').value;
  if (newPwd) {
    localStorage.setItem('adminPassword', newPwd);
    alert('Nouveau code enregistré.');
  } else {
    alert('Veuillez saisir un nouveau code.');
  }
}

// Sauvegarder la liste des courriels dans localStorage
function saveEmailList() {
  var emails = document.getElementById('emailList').value.trim();
  localStorage.setItem('emailList', emails);
  alert('Liste des courriels enregistrée.');
}
</script>
</body>
</html>
